import { useContext, useState } from "react";
import SortCategoryList from "./SortCategoryList";
import { TodoContext } from "../contexts/todoContext";

export default function CategoryDropdown() {
  const { tagFilter, setTagFilter, allCurrentTags } =
    useContext<TodoContextType>(TodoContext);

  const [isActive, setIsActive] = useState(false);
  return (
    <div
      className="flex h-[44px] w-[184px] cursor-pointer items-center justify-center rounded-full bg-WH"
      onClick={() => {
        setIsActive(!isActive);
      }}
    >
      {isActive ? (
        <>
          <div className="relative">
            <svg
              width="104"
              height="24"
              viewBox="0 0 104 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M98 15L92 9L86 15"
                stroke="#25282B"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
            <div className="absolute left-1/2 top-10 z-10 w-[184px] -translate-x-1/2 rounded-xl bg-WH shadow-md">
              <SortCategoryList
                allCurrentTags={allCurrentTags}
                setTagFilter={setTagFilter}
                tagFilter={tagFilter}
              />
            </div>
          </div>
        </>
      ) : (
        <>
          <svg
            width="104"
            height="24"
            viewBox="0 0 104 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M86 9L92 15L98 9"
              stroke="#25282B"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <path
              d="M9.42614 10H8.19318C8.12027 9.64536 7.99266 9.33381 7.81037 9.06534C7.63139 8.79688 7.41264 8.5715 7.15412 8.3892C6.89891 8.2036 6.61553 8.06439 6.30398 7.97159C5.99242 7.87879 5.66761 7.83239 5.32955 7.83239C4.71307 7.83239 4.15459 7.98816 3.65412 8.29972C3.15696 8.61127 2.76089 9.07031 2.46591 9.67685C2.17424 10.2834 2.02841 11.0275 2.02841 11.9091C2.02841 12.7907 2.17424 13.5348 2.46591 14.1413C2.76089 14.7479 3.15696 15.2069 3.65412 15.5185C4.15459 15.83 4.71307 15.9858 5.32955 15.9858C5.66761 15.9858 5.99242 15.9394 6.30398 15.8466C6.61553 15.7538 6.89891 15.6162 7.15412 15.4339C7.41264 15.2483 7.63139 15.0213 7.81037 14.7528C7.99266 14.4811 8.12027 14.1695 8.19318 13.8182H9.42614C9.33333 14.3385 9.1643 14.8042 8.91903 15.2152C8.67377 15.6262 8.36885 15.9759 8.00426 16.2642C7.63968 16.5492 7.23035 16.7663 6.77628 16.9155C6.32552 17.0646 5.84328 17.1392 5.32955 17.1392C4.46117 17.1392 3.68892 16.9271 3.01278 16.5028C2.33665 16.0786 1.80469 15.4754 1.4169 14.6932C1.02912 13.911 0.835227 12.983 0.835227 11.9091C0.835227 10.8352 1.02912 9.9072 1.4169 9.125C1.80469 8.3428 2.33665 7.73958 3.01278 7.31534C3.68892 6.8911 4.46117 6.67898 5.32955 6.67898C5.84328 6.67898 6.32552 6.75355 6.77628 6.9027C7.23035 7.05185 7.63968 7.2706 8.00426 7.55895C8.36885 7.84399 8.67377 8.192 8.91903 8.60298C9.1643 9.01065 9.33333 9.47633 9.42614 10ZM13.5066 17.179C13.0227 17.179 12.5835 17.0878 12.1891 16.9055C11.7947 16.7199 11.4815 16.4531 11.2495 16.1051C11.0175 15.7538 10.9015 15.3295 10.9015 14.8324C10.9015 14.3949 10.9876 14.0402 11.16 13.7685C11.3323 13.4934 11.5627 13.2779 11.851 13.1222C12.1394 12.9664 12.4576 12.8504 12.8056 12.7741C13.1569 12.6946 13.5099 12.6316 13.8645 12.5852C14.3285 12.5256 14.7047 12.4808 14.9931 12.451C15.2847 12.4179 15.4969 12.3632 15.6294 12.2869C15.7653 12.2107 15.8333 12.0781 15.8333 11.8892V11.8494C15.8333 11.3589 15.699 10.9777 15.4306 10.706C15.1654 10.4342 14.7627 10.2983 14.2225 10.2983C13.6623 10.2983 13.2232 10.4209 12.905 10.6662C12.5868 10.9115 12.3631 11.1733 12.2338 11.4517L11.1202 11.054C11.3191 10.59 11.5842 10.2287 11.9157 9.97017C12.2504 9.70833 12.615 9.52604 13.0094 9.4233C13.4071 9.31723 13.7982 9.2642 14.1827 9.2642C14.428 9.2642 14.7097 9.29403 15.0279 9.35369C15.3494 9.41004 15.6593 9.5277 15.9576 9.70668C16.2592 9.88565 16.5094 10.1558 16.7083 10.517C16.9071 10.8783 17.0066 11.3622 17.0066 11.9688V17H15.8333V15.9659H15.7736C15.6941 16.1316 15.5615 16.3089 15.3759 16.4979C15.1903 16.6868 14.9434 16.8475 14.6351 16.9801C14.3269 17.1127 13.9507 17.179 13.5066 17.179ZM13.6855 16.125C14.1496 16.125 14.5407 16.0339 14.8588 15.8516C15.1803 15.6693 15.4223 15.4339 15.5847 15.1456C15.7504 14.8572 15.8333 14.554 15.8333 14.2358V13.1619C15.7836 13.2216 15.6742 13.2763 15.5051 13.326C15.3394 13.3724 15.1472 13.4138 14.9284 13.4503C14.713 13.4834 14.5025 13.5133 14.2971 13.5398C14.0949 13.563 13.9308 13.5829 13.8049 13.5994C13.4999 13.6392 13.2149 13.7038 12.9498 13.7933C12.6879 13.8795 12.4758 14.0104 12.3134 14.1861C12.1543 14.3584 12.0748 14.5937 12.0748 14.892C12.0748 15.2997 12.2256 15.608 12.5272 15.8168C12.8321 16.0223 13.2182 16.125 13.6855 16.125ZM22.4691 9.36364V10.358H18.5117V9.36364H22.4691ZM19.6651 7.53409H20.8384V14.8125C20.8384 15.1439 20.8865 15.3925 20.9826 15.5582C21.082 15.7206 21.208 15.83 21.3604 15.8864C21.5162 15.9394 21.6803 15.9659 21.8526 15.9659C21.9819 15.9659 22.088 15.9593 22.1708 15.946C22.2537 15.9295 22.32 15.9162 22.3697 15.9062L22.6083 16.9602C22.5288 16.9901 22.4177 17.0199 22.2752 17.0497C22.1327 17.0829 21.9521 17.0994 21.7333 17.0994C21.4019 17.0994 21.0771 17.0282 20.7589 16.8857C20.444 16.7431 20.1822 16.526 19.9734 16.2344C19.7679 15.9427 19.6651 15.5748 19.6651 15.1307V7.53409ZM27.3537 17.1591C26.6179 17.1591 25.9832 16.9967 25.4496 16.6719C24.9193 16.3438 24.5099 15.8864 24.2216 15.2997C23.9366 14.7098 23.794 14.0237 23.794 13.2415C23.794 12.4593 23.9366 11.7699 24.2216 11.1733C24.5099 10.5734 24.911 10.1061 25.4247 9.77131C25.9418 9.43324 26.545 9.2642 27.2344 9.2642C27.6321 9.2642 28.0249 9.33049 28.4126 9.46307C28.8004 9.59564 29.1534 9.81108 29.4716 10.1094C29.7898 10.4044 30.0433 10.7955 30.2322 11.2827C30.4212 11.7699 30.5156 12.3698 30.5156 13.0824V13.5795H24.6293V12.5653H29.3224C29.3224 12.1345 29.2363 11.75 29.0639 11.4119C28.8949 11.0739 28.6529 10.8071 28.3381 10.6115C28.0265 10.416 27.6586 10.3182 27.2344 10.3182C26.767 10.3182 26.3627 10.4342 26.0213 10.6662C25.6832 10.8949 25.4231 11.1932 25.2408 11.5611C25.0585 11.929 24.9673 12.3234 24.9673 12.7443V13.4205C24.9673 13.9972 25.0668 14.486 25.2656 14.8871C25.4678 15.2848 25.7479 15.5881 26.1058 15.7969C26.4638 16.0024 26.8797 16.1051 27.3537 16.1051C27.6619 16.1051 27.9403 16.062 28.1889 15.9759C28.4408 15.8864 28.6579 15.7538 28.8402 15.5781C29.0225 15.3991 29.1634 15.1771 29.2628 14.9119L30.3963 15.2301C30.277 15.6146 30.0765 15.9527 29.7947 16.2443C29.513 16.5327 29.165 16.758 28.7507 16.9205C28.3364 17.0795 27.8707 17.1591 27.3537 17.1591ZM35.3828 20.0227C34.8161 20.0227 34.3288 19.9498 33.9212 19.804C33.5135 19.6615 33.1738 19.4725 32.902 19.2372C32.6335 19.0052 32.4197 18.7566 32.2607 18.4915L33.1953 17.8352C33.3014 17.9744 33.4356 18.1335 33.598 18.3125C33.7604 18.4948 33.9825 18.6522 34.2642 18.7848C34.5492 18.9207 34.9221 18.9886 35.3828 18.9886C35.9993 18.9886 36.508 18.8395 36.9091 18.5412C37.3101 18.2429 37.5107 17.7756 37.5107 17.1392V15.5881H37.4112C37.325 15.7273 37.2024 15.8996 37.0433 16.1051C36.8875 16.3073 36.6622 16.4879 36.3672 16.647C36.0755 16.8028 35.6811 16.8807 35.1839 16.8807C34.5675 16.8807 34.014 16.7348 33.5234 16.4432C33.0362 16.1515 32.6501 15.7273 32.3651 15.1705C32.0833 14.6136 31.9425 13.9375 31.9425 13.142C31.9425 12.3598 32.08 11.6787 32.3551 11.0987C32.6302 10.5154 33.013 10.0646 33.5036 9.74645C33.9941 9.42495 34.5608 9.2642 35.2038 9.2642C35.701 9.2642 36.0954 9.34706 36.3871 9.51278C36.6821 9.67519 36.9074 9.8608 37.0632 10.0696C37.2223 10.2751 37.3449 10.4441 37.4311 10.5767H37.5504V9.36364H38.6839V17.2188C38.6839 17.875 38.5348 18.4086 38.2365 18.8196C37.9415 19.2339 37.5438 19.5372 37.0433 19.7294C36.5462 19.925 35.9927 20.0227 35.3828 20.0227ZM35.343 15.8267C35.8137 15.8267 36.2114 15.719 36.5362 15.5036C36.861 15.2881 37.108 14.9782 37.277 14.5739C37.446 14.1695 37.5305 13.6856 37.5305 13.1222C37.5305 12.572 37.4477 12.0864 37.282 11.6655C37.1162 11.2446 36.871 10.9148 36.5462 10.6761C36.2214 10.4375 35.8203 10.3182 35.343 10.3182C34.8459 10.3182 34.4316 10.4441 34.1001 10.696C33.772 10.9479 33.5251 11.286 33.3594 11.7102C33.197 12.1345 33.1158 12.6051 33.1158 13.1222C33.1158 13.6525 33.1986 14.1214 33.3643 14.5291C33.5334 14.9335 33.782 15.2517 34.1101 15.4837C34.4415 15.7124 34.8525 15.8267 35.343 15.8267ZM43.9339 17.1591C43.2446 17.1591 42.6397 16.995 42.1193 16.6669C41.6023 16.3388 41.1979 15.8797 40.9062 15.2898C40.6179 14.6998 40.4737 14.0104 40.4737 13.2216C40.4737 12.4261 40.6179 11.7318 40.9062 11.1385C41.1979 10.5452 41.6023 10.0845 42.1193 9.75639C42.6397 9.42827 43.2446 9.2642 43.9339 9.2642C44.6233 9.2642 45.2266 9.42827 45.7436 9.75639C46.264 10.0845 46.6683 10.5452 46.9567 11.1385C47.2483 11.7318 47.3942 12.4261 47.3942 13.2216C47.3942 14.0104 47.2483 14.6998 46.9567 15.2898C46.6683 15.8797 46.264 16.3388 45.7436 16.6669C45.2266 16.995 44.6233 17.1591 43.9339 17.1591ZM43.9339 16.1051C44.4576 16.1051 44.8885 15.9709 45.2266 15.7024C45.5646 15.4339 45.8149 15.081 45.9773 14.6435C46.1397 14.206 46.2209 13.732 46.2209 13.2216C46.2209 12.7112 46.1397 12.2356 45.9773 11.7947C45.8149 11.3539 45.5646 10.9976 45.2266 10.7259C44.8885 10.4541 44.4576 10.3182 43.9339 10.3182C43.4103 10.3182 42.9794 10.4541 42.6413 10.7259C42.3033 10.9976 42.053 11.3539 41.8906 11.7947C41.7282 12.2356 41.647 12.7112 41.647 13.2216C41.647 13.732 41.7282 14.206 41.8906 14.6435C42.053 15.081 42.3033 15.4339 42.6413 15.7024C42.9794 15.9709 43.4103 16.1051 43.9339 16.1051ZM49.1852 17V9.36364H50.3187V10.517H50.3983C50.5375 10.1392 50.7894 9.83262 51.1539 9.5973C51.5185 9.36198 51.9295 9.24432 52.3869 9.24432C52.4731 9.24432 52.5808 9.24597 52.71 9.24929C52.8393 9.2526 52.9371 9.25758 53.0034 9.2642V10.4574C52.9636 10.4474 52.8725 10.4325 52.7299 10.4126C52.5907 10.3894 52.4432 10.3778 52.2875 10.3778C51.9163 10.3778 51.5848 10.4557 51.2931 10.6115C51.0048 10.764 50.7761 10.9761 50.6071 11.2479C50.4413 11.5163 50.3585 11.8229 50.3585 12.1676V17H49.1852ZM55.3823 19.8636C55.1834 19.8636 55.0061 19.8471 54.8503 19.8139C54.6945 19.7841 54.5868 19.7543 54.5272 19.7244L54.8255 18.6903C55.1105 18.7633 55.3624 18.7898 55.5811 18.7699C55.7999 18.75 55.9938 18.6522 56.1628 18.4766C56.3352 18.3042 56.4926 18.0241 56.6351 17.6364L56.8539 17.0398L54.03 9.36364H55.3027L57.4107 15.4489H57.4902L59.5982 9.36364H60.8709L57.6294 18.1136C57.4836 18.508 57.303 18.8345 57.0875 19.093C56.8721 19.3549 56.6219 19.5488 56.3368 19.6747C56.0551 19.8007 55.7369 19.8636 55.3823 19.8636Z"
              fill="#090003"
            />
          </svg>
        </>
      )}
    </div>
  );
}
